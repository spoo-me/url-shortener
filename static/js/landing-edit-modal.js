let currentEditingAlias=null;async function openLandingEditModal(a){currentEditingAlias=a;const b=document.getElementById("landing-edit-modal");if(!b)return void console.error("Landing edit modal not found");b.classList.add("landing-edit-active"),document.body.style.overflow="hidden";try{const b=await fetch(`/api/v1/urls?alias=${encodeURIComponent(a)}`,{credentials:"include"});if(!b.ok)throw new Error("Failed to fetch link data");const c=await b.json(),d=c.data&&0<c.data.length?c.data[0]:null;if(!d)return void populateLandingEditForm({alias:a});populateLandingEditForm(d)}catch(b){console.error("Error fetching link data:",b),populateLandingEditForm({alias:a})}}function populateLandingEditForm(a){document.getElementById("landing-edit-alias").value=a.alias||"",document.getElementById("landing-edit-long-url").value=a.long_url||"";const b=a.password_protected||!1,c=document.getElementById("landing-password-status");if(b?(c.textContent="\u2713 Password is currently set",c.style.color="#10b981"):(c.textContent="No password set",c.style.color="#6b7280"),document.getElementById("landing-edit-password").value="",document.getElementById("landing-remove-password-checkbox").checked=!1,document.getElementById("landing-edit-private-stats").checked=a.private_stats||!1,document.getElementById("landing-edit-max-clicks").value=a.max_clicks||"",a.expire_after){const b=new Date(a.expire_after),c=new Date(b.getTime()-6e4*b.getTimezoneOffset()).toISOString().slice(0,16);document.getElementById("landing-edit-expire-after").value=c}else document.getElementById("landing-edit-expire-after").value="";document.getElementById("landing-edit-block-bots").checked=a.block_bots||!1;const d=document.querySelectorAll("#landing-edit-modal .landing-edit-tab"),e=document.querySelectorAll("#landing-edit-modal .landing-edit-tab-content"),f=document.querySelector("#landing-edit-modal .landing-edit-tabs");f&&f.setAttribute("data-active","0"),d.forEach((a,b)=>{a.classList.toggle("landing-edit-active",0===b)}),e.forEach((a,b)=>{a.classList.toggle("landing-edit-active",0===b)})}function closeLandingEditModal(){const a=document.getElementById("landing-edit-modal");if(a){a.classList.remove("landing-edit-active"),document.body.style.overflow="",currentEditingAlias=null;const b=document.getElementById("landing-edit-form");b&&b.reset()}}function promptSignupToSave(){closeLandingEditModal(),setTimeout(()=>{"function"==typeof openAuthModal&&(openAuthModal("login"),setTimeout(()=>{"function"==typeof showNotification&&showNotification("Sign up to save your changes and manage unlimited links!","info")},500))},200)}function isLandingEditModalOpen(){const a=document.getElementById("landing-edit-modal");return a&&a.classList.contains("landing-edit-active")}document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("landing-edit-modal");if(!a)return;const b=a.querySelectorAll(".landing-edit-tab");b.forEach(c=>{c.addEventListener("click",function(){const c=this.getAttribute("data-tab");b.forEach(a=>a.classList.remove("landing-edit-active")),this.classList.add("landing-edit-active");const d=a.querySelector(".landing-edit-tabs");if(d){const a=Array.from(b).indexOf(this);d.setAttribute("data-active",a)}const e=a.querySelectorAll(".landing-edit-tab-content");e.forEach(a=>{a.getAttribute("data-tab")===c?a.classList.add("landing-edit-active"):a.classList.remove("landing-edit-active")})})});const c=a.querySelector(".landing-edit-backdrop");c&&c.addEventListener("click",closeLandingEditModal);const d=document.getElementById("landing-remove-password-checkbox"),e=document.getElementById("landing-edit-password");d&&e&&d.addEventListener("change",function(){this.checked?(e.disabled=!0,e.value=""):e.disabled=!1})}),window.openLandingEditModal=openLandingEditModal,window.closeLandingEditModal=closeLandingEditModal,window.promptSignupToSave=promptSignupToSave,window.isLandingEditModalOpen=isLandingEditModalOpen;